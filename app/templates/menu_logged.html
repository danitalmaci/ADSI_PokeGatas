{% extends 'base.html' %}

{% block title %}Men√∫ Principal{% endblock %}

{% block page_class %}bg-pokedex{% endblock %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
  .main-viewport { background: transparent !important; }

  .mock-wrap {
    position: relative;
    width: min(980px, 92vw);
    height: 520px;
    margin: 30px auto 0;
  }

  .mock-title-pill {
    position: absolute;
    top: -18px;
    left: 120px;
    background: rgba(255, 158, 181, 0.55);
    color: rgba(255,255,255,0.95);
    padding: 16px 28px;
    border-radius: 999px;
    font-family: "Press Start 2P", system-ui, sans-serif;
    font-size: 34px;
    letter-spacing: 1px;
    text-shadow: 0 1px 0 rgba(255,255,255,0.2);
    z-index: 3;
    user-select: none;
  }

  .mock-top-icon {
    position: absolute;
    top: -10px;
    right: 26px;
    width: 64px;
    height: 64px;
    border-radius: 999px;
    background: rgba(255, 158, 181, 0.55);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3;
  }
  .mock-top-icon span{ font-size: 34px; line-height: 1; opacity: .95; }

  .mock-panel {
    position: absolute;
    top: 40px;
    left: 80px;
    right: 30px;
    bottom: 20px;
    background: rgba(255, 158, 181, 0.72);
    border-radius: 34px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.10);
    padding: 28px 26px 22px;
    box-sizing: border-box;
  }

  .mock-filter-pill {
    position: absolute;
    top: 14px;
    right: 22px;
    background: rgba(255,255,255,0.35);
    color: rgba(255,255,255,0.95);
    padding: 8px 18px;
    border-radius: 999px;
    font-family: "Press Start 2P", system-ui, sans-serif;
    font-size: 14px;
    user-select: none;
  }

  .mock-scroll {
    position: absolute;
    top: 62px;
    left: 22px;
    right: 18px;
    bottom: 18px;
    overflow-y: auto;
    padding-right: 18px;
    box-sizing: border-box;
  }

  .mock-scroll::-webkit-scrollbar { width: 10px; }
  .mock-scroll::-webkit-scrollbar-track { background: rgba(255,255,255,0.18); border-radius: 10px; }
  .mock-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.75); border-radius: 10px; }

  .mock-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 22px;
  }

  /* üî• ahora .mock-card es un contenedor, y el link es una capa */
  .mock-card {
    background: rgba(255,255,255,0.42);
    border-radius: 22px;
    height: 160px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
  }

  /* capa clicable para abrir detalle */
  .mock-card-link{
    position: absolute;
    inset: 0;
    text-decoration: none;
    z-index: 1;
  }

  .mock-card img {
    width: 96px;
    height: 96px;
    object-fit: contain;
    image-rendering: pixelated;
    filter: drop-shadow(0 4px 0 rgba(0,0,0,0.08));
    z-index: 0;
  }

  .mock-number {
    position: absolute;
    top: 10px;
    left: 12px;
    font-family: "Press Start 2P", system-ui, sans-serif;
    font-size: 12px;
    color: #ff6ea0;
    opacity: 0.9;
    pointer-events: none;
    z-index: 2;
  }

  /* ‚úÖ FILA inferior: nombre + estrella AL LADO */
  .mock-name-row{
    position: absolute;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    display: inline-flex;
    align-items: center;
    gap: 10px;
    z-index: 3;
    white-space: nowrap;
  }

  .mock-name-text{
    font-family: "Press Start 2P", system-ui, sans-serif;
    font-size: 13px;
    color: #ff6ea0;
    pointer-events: none;
  }

  /* ‚≠ê Form + bot√≥n estrella */
  .fav-form{ margin: 0; z-index: 3; }

  .fav-btn{
    background: none;
    border: none;
    cursor: pointer;
    padding: 0 !important;
    margin: 0 !important;

    font-size: 28px !important;   /* üî• m√°s grande (y vence tu style.css global) */
    line-height: 1 !important;

    color: #ffcc00;
    text-shadow: 0 2px 0 rgba(0,0,0,0.10);
    transform: translateY(1px);
  }

  .fav-btn:hover{ transform: translateY(1px) scale(1.15); }

  /* para que al pulsar la estrella no se active el link debajo */
  .fav-form, .fav-btn{ position: relative; z-index: 4; }

  @media (max-width: 900px) {
    .mock-wrap { height: 520px; }
    .mock-title-pill { left: 24px; font-size: 26px; padding: 14px 20px; }
    .mock-panel { left: 14px; right: 14px; }
    .mock-grid { grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 520px) {
    .mock-grid { grid-template-columns: 1fr; }
    .mock-card { height: 150px; }
  }
</style>

<nav class="side-menu active" aria-label="Men√∫ lateral">
  <div class="menu-buttons">
    <a class="menu-btn" href="/perfil">Perfil</a>
    <a class="menu-btn" href="/equipos">Equipos</a>
    <a class="menu-btn" href="/notificaciones">Notificaciones</a>
    <a class="menu-btn" href="/chatbot">Service-Ball</a>
    <a class="menu-btn" href="/logout">Cerrar sesi√≥n</a>
  </div>
</nav>

<div class="app-interface">
  <div class="main-viewport shifted">

    <div class="mock-wrap">
      <div class="mock-title-pill">Pokedex</div>

      <div class="mock-top-icon" aria-hidden="true">
        <span>‚ò∫</span>
      </div>

      <div class="mock-panel">
        <div class="mock-filter-pill">Filtrar</div>

        <div class="mock-scroll">
          <div class="mock-grid">
            {% for pokemon in pokemons %}

              <div class="mock-card">

                <!-- link a detalle (capa inferior) -->
                <a class="mock-card-link"
                   href="{{ url_for('pokedex.mostrarPokemon', nombrePokemon=pokemon.nombrePokemon) }}"
                   aria-label="Ver {{ pokemon.nombrePokemon }}"></a>

                <div class="mock-number">#{{ pokemon.pokedexID }}</div>

                <img src="{{ pokemon.imagen }}" alt="{{ pokemon.nombrePokemon }}">

                <!-- ‚úÖ nombre + estrella al lado -->
                <div class="mock-name-row">
                  <span class="mock-name-text">{{ pokemon.nombrePokemon }}</span>

                  <form class="fav-form"
                        method="POST"
                        action="{{ url_for('pokedex.anadir_favorito', nombrePokemon=pokemon.nombrePokemon) }}">
                    <!-- ‚úÖ mantener filtros -->
                    <input type="hidden" name="nombre" value="{{ request.args.get('nombre','') }}">
                    <input type="hidden" name="tipo" value="{{ request.args.get('tipo','') }}">

                    <button class="fav-btn" type="submit" title="A√±adir a favoritos">‚òÖ</button>
                  </form>
                </div>

              </div>

            {% endfor %}
          </div>
        </div>
      </div>

    </div>

  </div>
</div>

{% endblock %}
