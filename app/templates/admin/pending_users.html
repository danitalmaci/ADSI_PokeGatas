{% extends "base.html" %}

{% block title %}Solicitudes Pendientes{% endblock %}

{% block page_class %}admin-page-bg{% endblock %}

{% block content %}

    <div class="admin-container">
        <div class="admin-header-row">
            <div class="header-pill title-pill">
                Solicitudes Pendientes
            </div>
            
            <a href="{{ url_for('admin.admin_users') }}" class="header-pill link-pill" style="flex: 0 0 auto;">
                Volver a Usuarios
            </a>
        </div>

        <div class="user-list-wrapper">
            {% if users %}
                {% for user in users %}
                <div class="user-card">
                    
                    <div class="avatar-container">
                        {% if user.foto %}
                            <img src="{{ url_for('static', filename=user.foto | replace('static/', '') | replace('\\', '/')) }}" 
                                alt="Avatar" 
                                style="width: 100%; height: 100%; object-fit: contain;"> 
                        {% else %}
                            <img src="{{ url_for('static', filename='img/usuario/user1.png') }}" 
                                alt="Avatar por defecto" 
                                style="width: 100%; height: 100%; object-fit: contain;"> 
                        {% endif %}
                    </div>

                    <div class="user-info">
                        <span class="nickname">{{ user.nombreUsuario }}</span>
                    </div>

                    <div class="action-buttons">
                        
                        <a href="{{ url_for('admin.approve_user', nickname=user.nombreUsuario) }}" class="btn-img btn-approve" title="Aprobar Solicitud">
                            <img src="{{ url_for('static', filename='img/iconos/simbolo_Guardar.png') }}" alt="Aprobar">
                        </a>

                        <a href="{{ url_for('admin.delete_user', nickname=user.nombreUsuario) }}" class="btn-img btn-delete" title="Rechazar Solicitud" onclick="return confirm('¿Seguro que quieres rechazar y borrar esta solicitud?');">
                            <img src="{{ url_for('static', filename='img/iconos/simbolo_Eliminar_Rosa.png') }}" alt="Rechazar">
                        </a>

                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; color: white; margin-top: 20px;">
                    <h3>¡No hay solicitudes pendientes!</h3>
                </div>
            {% endif %}
        </div>
    </div>
    <a href="{{ url_for('admin.admin_users') }}" class="btn-back-fixed">
        <img src="{{ url_for('static', filename='img/iconos/simbolo_Volver.png') }}" alt="Volver">
    </a>
{% endblock %}